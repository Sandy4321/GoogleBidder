import time
import json
from collections import defaultdict

def autovivify(levels=1, final=dict):
    return (defaultdict(final) if levels < 2 else defaultdict(lambda: autovivify(levels - 1, final)))

words = autovivify(8, int)

rulesData = open("rules.json","r").read()
rulesIndex=json.loads(rulesData)
for key in rulesIndex.keys():
    value=rulesIndex[key]
    sm=key.split("|")
    words[sm[0]][sm[1]][sm[2]][sm[3]][sm[4]][sm[5]][sm[6]][sm[7]]=value

ruleSet = "1|*|*|*|*|*|*|*,*|2|*|*|*|*|*|*,*|*|3|*|*|*|*|*,*|*|*|4|*|*|*|*,*|*|*|*|5|*|*|*,*|*|*|*|*|6|*|*,*|*|*|*|*|*|7|*,*|*|*|*|*|*|*|8,1|2|*|*|*|*|*|*,1|*|3|*|*|*|*|*,1|*|*|4|*|*|*|*,1|*|*|*|5|*|*|*,1|*|*|*|*|6|*|*,1|*|*|*|*|*|7|*,1|*|*|*|*|*|*|8,*|2|3|*|*|*|*|*,*|2|*|4|*|*|*|*,*|2|*|*|5|*|*|*,*|2|*|*|*|6|*|*,*|2|*|*|*|*|7|*,*|2|*|*|*|*|*|8,*|*|3|4|*|*|*|*,*|*|3|*|5|*|*|*,*|*|3|*|*|6|*|*,*|*|3|*|*|*|7|*,*|*|3|*|*|*|*|8,*|*|*|4|5|*|*|*,*|*|*|4|*|6|*|*,*|*|*|4|*|*|7|*,*|*|*|4|*|*|*|8,*|*|*|*|5|6|*|*,*|*|*|*|5|*|7|*,*|*|*|*|5|*|*|8,*|*|*|*|*|6|7|*,*|*|*|*|*|6|*|8,*|*|*|*|*|*|7|8,1|2|3|*|*|*|*|*,1|2|*|4|*|*|*|*,1|2|*|*|5|*|*|*,1|2|*|*|*|6|*|*,1|2|*|*|*|*|7|*,1|2|*|*|*|*|*|8,1|*|3|4|*|*|*|*,1|*|3|*|5|*|*|*,1|*|3|*|*|6|*|*,1|*|3|*|*|*|7|*,1|*|3|*|*|*|*|8,1|*|*|4|5|*|*|*,1|*|*|4|*|6|*|*,1|*|*|4|*|*|7|*,1|*|*|4|*|*|*|8,1|*|*|*|5|6|*|*,1|*|*|*|5|*|7|*,1|*|*|*|5|*|*|8,1|*|*|*|*|6|7|*,1|*|*|*|*|6|*|8,1|*|*|*|*|*|7|8,*|2|3|4|*|*|*|*,*|2|3|*|5|*|*|*,*|2|3|*|*|6|*|*,*|2|3|*|*|*|7|*,*|2|3|*|*|*|*|8,*|2|*|4|5|*|*|*,*|2|*|4|*|6|*|*,*|2|*|4|*|*|7|*,*|2|*|4|*|*|*|8,*|2|*|*|5|6|*|*,*|2|*|*|5|*|7|*,*|2|*|*|5|*|*|8,*|2|*|*|*|6|7|*,*|2|*|*|*|6|*|8,*|2|*|*|*|*|7|8,*|*|3|4|5|*|*|*,*|*|3|4|*|6|*|*,*|*|3|4|*|*|7|*,*|*|3|4|*|*|*|8,*|*|3|*|5|6|*|*,*|*|3|*|5|*|7|*,*|*|3|*|5|*|*|8,*|*|3|*|*|6|7|*,*|*|3|*|*|6|*|8,*|*|3|*|*|*|7|8,*|*|*|4|5|6|*|*,*|*|*|4|5|*|7|*,*|*|*|4|5|*|*|8,*|*|*|4|*|6|7|*,*|*|*|4|*|6|*|8,*|*|*|4|*|*|7|8,*|*|*|*|5|6|7|*,*|*|*|*|5|6|*|8,*|*|*|*|5|*|7|8,*|*|*|*|*|6|7|8,1|2|3|4|*|*|*|*,1|2|3|*|5|*|*|*,1|2|3|*|*|6|*|*,1|2|3|*|*|*|7|*,1|2|3|*|*|*|*|8,1|2|*|4|5|*|*|*,1|2|*|4|*|6|*|*,1|2|*|4|*|*|7|*,1|2|*|4|*|*|*|8,1|2|*|*|5|6|*|*,1|2|*|*|5|*|7|*,1|2|*|*|5|*|*|8,1|2|*|*|*|6|7|*,1|2|*|*|*|6|*|8,1|2|*|*|*|*|7|8,1|*|3|4|5|*|*|*,1|*|3|4|*|6|*|*,1|*|3|4|*|*|7|*,1|*|3|4|*|*|*|8,1|*|3|*|5|6|*|*,1|*|3|*|5|*|7|*,1|*|3|*|5|*|*|8,1|*|3|*|*|6|7|*,1|*|3|*|*|6|*|8,1|*|3|*|*|*|7|8,1|*|*|4|5|6|*|*,1|*|*|4|5|*|7|*,1|*|*|4|5|*|*|8,1|*|*|4|*|6|7|*,1|*|*|4|*|6|*|8,1|*|*|4|*|*|7|8,1|*|*|*|5|6|7|*,1|*|*|*|5|6|*|8,1|*|*|*|5|*|7|8,1|*|*|*|*|6|7|8,*|2|3|4|5|*|*|*,*|2|3|4|*|6|*|*,*|2|3|4|*|*|7|*,*|2|3|4|*|*|*|8,*|2|3|*|5|6|*|*,*|2|3|*|5|*|7|*,*|2|3|*|5|*|*|8,*|2|3|*|*|6|7|*,*|2|3|*|*|6|*|8,*|2|3|*|*|*|7|8,*|2|*|4|5|6|*|*,*|2|*|4|5|*|7|*,*|2|*|4|5|*|*|8,*|2|*|4|*|6|7|*,*|2|*|4|*|6|*|8,*|2|*|4|*|*|7|8,*|2|*|*|5|6|7|*,*|2|*|*|5|6|*|8,*|2|*|*|5|*|7|8,*|2|*|*|*|6|7|8,*|*|3|4|5|6|*|*,*|*|3|4|5|*|7|*,*|*|3|4|5|*|*|8,*|*|3|4|*|6|7|*,*|*|3|4|*|6|*|8,*|*|3|4|*|*|7|8,*|*|3|*|5|6|7|*,*|*|3|*|5|6|*|8,*|*|3|*|5|*|7|8,*|*|3|*|*|6|7|8,*|*|*|4|5|6|7|*,*|*|*|4|5|6|*|8,*|*|*|4|5|*|7|8,*|*|*|4|*|6|7|8,*|*|*|*|5|6|7|8,1|2|3|4|5|*|*|*,1|2|3|4|*|6|*|*,1|2|3|4|*|*|7|*,1|2|3|4|*|*|*|8,1|2|3|*|5|6|*|*,1|2|3|*|5|*|7|*,1|2|3|*|5|*|*|8,1|2|3|*|*|6|7|*,1|2|3|*|*|6|*|8,1|2|3|*|*|*|7|8,1|2|*|4|5|6|*|*,1|2|*|4|5|*|7|*,1|2|*|4|5|*|*|8,1|2|*|4|*|6|7|*,1|2|*|4|*|6|*|8,1|2|*|4|*|*|7|8,1|2|*|*|5|6|7|*,1|2|*|*|5|6|*|8,1|2|*|*|5|*|7|8,1|2|*|*|*|6|7|8,1|*|3|4|5|6|*|*,1|*|3|4|5|*|7|*,1|*|3|4|5|*|*|8,1|*|3|4|*|6|7|*,1|*|3|4|*|6|*|8,1|*|3|4|*|*|7|8,1|*|3|*|5|6|7|*,1|*|3|*|5|6|*|8,1|*|3|*|5|*|7|8,1|*|3|*|*|6|7|8,1|*|*|4|5|6|7|*,1|*|*|4|5|6|*|8,1|*|*|4|5|*|7|8,1|*|*|4|*|6|7|8,1|*|*|*|5|6|7|8,*|2|3|4|5|6|*|*,*|2|3|4|5|*|7|*,*|2|3|4|5|*|*|8,*|2|3|4|*|6|7|*,*|2|3|4|*|6|*|8,*|2|3|4|*|*|7|8,*|2|3|*|5|6|7|*,*|2|3|*|5|6|*|8,*|2|3|*|5|*|7|8,*|2|3|*|*|6|7|8,*|2|*|4|5|6|7|*,*|2|*|4|5|6|*|8,*|2|*|4|5|*|7|8,*|2|*|4|*|6|7|8,*|2|*|*|5|6|7|8,*|*|3|4|5|6|7|*,*|*|3|4|5|6|*|8,*|*|3|4|5|*|7|8,*|*|3|4|*|6|7|8,*|*|3|*|5|6|7|8,*|*|*|4|5|6|7|8,1|2|3|4|5|6|*|*,1|2|3|4|5|*|7|*,1|2|3|4|5|*|*|8,1|2|3|4|*|6|7|*,1|2|3|4|*|6|*|8,1|2|3|4|*|*|7|8,1|2|3|*|5|6|7|*,1|2|3|*|5|6|*|8,1|2|3|*|5|*|7|8,1|2|3|*|*|6|7|8,1|2|*|4|5|6|7|*,1|2|*|4|5|6|*|8,1|2|*|4|5|*|7|8,1|2|*|4|*|6|7|8,1|2|*|*|5|6|7|8,1|*|3|4|5|6|7|*,1|*|3|4|5|6|*|8,1|*|3|4|5|*|7|8,1|*|3|4|*|6|7|8,1|*|3|*|5|6|7|8,1|*|*|4|5|6|7|8,*|2|3|4|5|6|7|*,*|2|3|4|5|6|*|8,*|2|3|4|5|*|7|8,*|2|3|4|*|6|7|8,*|2|3|*|5|6|7|8,*|2|*|4|5|6|7|8,*|*|3|4|5|6|7|8,1|2|3|4|5|6|7|*,1|2|3|4|5|6|*|8,1|2|3|4|5|*|7|8,1|2|3|4|*|6|7|8,1|2|3|*|5|6|7|8,1|2|*|4|5|6|7|8,1|*|3|4|5|6|7|8,*|2|3|4|5|6|7|8,1|2|3|4|5|6|7|8"
m=[]

start = time.time()
newRuleSet = ruleSet.replace("1", "devidomainemagdomainsings.com").replace("2", "mumbai").replace("3", "maharashtra").replace("4", "3").replace("5", "16").replace("6", "6").replace("7", "3").replace("8", "vodafone")
ruleSet=newRuleSet.split(",")
for rule in ruleSet:
  sm=rule.split("|")
  k=words[sm[0]][sm[1]][sm[2]][sm[3]][sm[4]][sm[5]][sm[6]][sm[7]]
  if k>0:
    m.append(k)
  timeTaken = time.time() - start
print timeTaken*1000

print m